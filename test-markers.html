<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>标记测试</title>
    <script src="reactive-lit.js"></script>
</head>
<body>
    <h1>标记索引测试</h1>
    <div id="test"></div>

    <script>
        const { html, render, createComponent, useState } = window.ReactiveLit;

        // 直接测试模板标记
        const count = 10;
        const arr = [1, 2, 3];

        const template = html`
            <div>
                <h3>Count: ${count}</h3>
                <div>Array: ${arr}</div>
            </div>
        `;

        console.log('模板字符串:', template.strings);
        console.log('模板值:', template.values);
        console.log('值的数量:', template.values.length);

        render(template, document.getElementById('test'));

        // 检查生成的 HTML
        const testDiv = document.getElementById('test');
        console.log('生成的 HTML:', testDiv.innerHTML);

        // 测试组件
        createComponent('debug-component', () => {
            const count = useState(0);
            const arr = useState([1, 2, 3]);

            console.log('=== 组件渲染 ===');
            console.log('count():', count());
            console.log('arr():', arr());

            const result = html`
                <div>
                    <h3>Count: ${count()}</h3>
                    <div>Array: ${arr().map(i => html`<span>${i}</span>`)}</div>
                    <button onClick=${() => {
                        console.log('点击 count');
                        count(count() + 1);
                    }}>Count +1</button>
                    <button onClick=${() => {
                        console.log('点击 arr');
                        arr([...arr(), arr().length + 1]);
                    }}>Array Push</button>
                </div>
            `;

            console.log('返回的模板 strings:', result.strings);
            console.log('返回的模板 values:', result.values);
            console.log('values 数量:', result.values.length);

            return result;
        });

        document.body.innerHTML += '<debug-component></debug-component>';
    </script>
</body>
</html>

