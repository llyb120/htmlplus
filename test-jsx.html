<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JSX æµ‹è¯•</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 30px;
        }
        .component-box {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‰ JSX è¯­æ³•æµ‹è¯•</h1>
        
        <div class="component-box">
            <jsx-counter></jsx-counter>
        </div>
        
        <div class="component-box">
            <jsx-list></jsx-list>
        </div>
        
        <div class="component-box">
            <jsx-lifecycle></jsx-lifecycle>
        </div>
        
        <div class="component-box">
            <jsx-buttons></jsx-buttons>
        </div>
        
        <div class="component-box">
            <jsx-conditional></jsx-conditional>
        </div>
        
        <div class="component-box">
            <jsx-form></jsx-form>
        </div>
    </div>

    <script src="htmp.js"></script>
    
    <!-- ä½¿ç”¨ Babel Standalone è¿›è¡Œå®¢æˆ·ç«¯ç¼–è¯‘ï¼ˆä»…ç”¨äºå¼€å‘æµ‹è¯•ï¼‰ -->
    <script src="./babel.min.js"></script>
    <script src="./babel-plugin-jsx-to-html.brower.js"></script>
    
    <script>
        // ä½¿ç”¨ Babel.registerPlugin æ³¨å†Œæ’ä»¶
        Babel.registerPlugin('jsx-to-html', jsxToHtmlPlugin);
    </script>
    
    <script type="text/babel" data-plugins="jsx-to-html">
        const { html,createComponent, useState, onMounted, onUnmounted } = window.htmp;

        // ç¤ºä¾‹ 1: ç®€å•è®¡æ•°å™¨
        createComponent('jsx-counter', () => {
          const count = useState(0);
          
          return () => (
            <div style={{ textAlign: 'center', padding: '20px' }}>
              <h2>JSX è®¡æ•°å™¨</h2>
              <p style={{ fontSize: '3em', color: '#667eea' }}>{count()}</p>
              <button onClick={() => count(count() - 1)}>-1</button>
              <button onClick={() => count(0)}>é‡ç½®</button>
              <button onClick={() => count(count() + 1)}>+1</button>
            </div>
          );
        });

        // ç¤ºä¾‹ 2: åˆ—è¡¨æ¸²æŸ“
        createComponent('jsx-list', () => {
          const items = useState([1, 2, 3]);
          
          const addItem = () => {
            items([...items(), items().length + 1]);
          };
          
          const removeItem = () => {
            items(items().slice(0, -1));
          };
          
          return () => (
            <div style={{ padding: '20px' }}>
              <h3>åˆ—è¡¨ ({items().length} é¡¹)</h3>
              <div>
                {items().map(item => (
                  <div key={item} style={{ 
                    padding: '10px', 
                    margin: '5px', 
                    background: '#f0f0f0',
                    borderRadius: '5px'
                  }}>
                    é¡¹ç›® #{item}
                  </div>
                ))}
              </div>
              <button onClick={addItem}>â• æ·»åŠ </button>
              <button onClick={removeItem}>â– åˆ é™¤</button>
            </div>
          );
        });

        // ç¤ºä¾‹ 3: å¸¦ç”Ÿå‘½å‘¨æœŸçš„ç»„ä»¶
        createComponent('jsx-lifecycle', () => {
          const message = useState('ç­‰å¾…ä¸­...');
          let timer;
          
          onMounted(() => {
            message('ç»„ä»¶å·²æŒ‚è½½');
            timer = setInterval(() => {
              message(`æ—¶é—´: ${new Date().toLocaleTimeString()}`);
            }, 1000);
          });
          
          onUnmounted(() => {
            if (timer) clearInterval(timer);
          });
          
          return () => (
            <div style={{ padding: '20px', background: '#e3f2fd', borderRadius: '8px' }}>
              <h3>ç”Ÿå‘½å‘¨æœŸç¤ºä¾‹</h3>
              <p>{message()}</p>
            </div>
          );
        });

        // ç¤ºä¾‹ 4: æŒ‰é’®ç»„ä»¶
        createComponent('jsx-buttons', () => {
          const count = useState(0);
          
          return () => (
            <div style={{ padding: '20px' }}>
              <h3>æŒ‰é’®ç¤ºä¾‹</h3>
              <p>è®¡æ•°: {count()}</p>
            <button 
                onClick={() => count(count() + 1)}
              style={{
                  background: '#667eea',
                color: 'white',
                border: 'none',
                padding: '10px 20px',
                borderRadius: '5px',
                cursor: 'pointer',
                margin: '5px'
              }}
            >
                å¢åŠ 
              </button>
              <button 
                onClick={() => count(count() - 1)}
                style={{
                  background: '#f44336',
                  color: 'white',
                  border: 'none',
                  padding: '10px 20px',
                  borderRadius: '5px',
                  cursor: 'pointer',
                  margin: '5px'
                }}
              >
                å‡å°‘
              </button>
              <button 
                onClick={() => count(0)}
                style={{
                  background: '#4caf50',
                  color: 'white',
                  border: 'none',
                  padding: '10px 20px',
                  borderRadius: '5px',
                  cursor: 'pointer',
                  margin: '5px'
                }}
              >
                é‡ç½®
              </button>
            </div>
          );
        });

        // ç¤ºä¾‹ 5: Fragment (å·²ç§»é™¤ï¼Œå› ä¸ºæ²¡æœ‰ä½¿ç”¨)
        
        // ç¤ºä¾‹ 6: æ¡ä»¶æ¸²æŸ“
        createComponent('jsx-conditional', () => {
          const show = useState(true);
          const mode = useState('light');
          
          return () => (
            <div style={{ padding: '20px' }}>
              <h3>æ¡ä»¶æ¸²æŸ“</h3>
              
              <button onClick={() => show(!show())}>
                {show() ? 'éšè—' : 'æ˜¾ç¤º'}
              </button>
              
              <button onClick={() => mode(mode() === 'light' ? 'dark' : 'light')}>
                åˆ‡æ¢ä¸»é¢˜
              </button>
              
              {show() && (
                <div style={{
                  padding: '20px',
                  margin: '10px 0',
                  background: mode() === 'light' ? '#f5f5f5' : '#333',
                  color: mode() === 'light' ? '#333' : '#f5f5f5',
                  borderRadius: '5px'
                }}>
                  å½“å‰ä¸»é¢˜: {mode()}
                </div>
              )}
            </div>
          );
        });

        // ç¤ºä¾‹ 7: è¡¨å•è¾“å…¥
        createComponent('jsx-form', () => {
          const name = useState('');
          const email = useState('');
          
          const handleSubmit = (e) => {
            e.preventDefault();
            alert(`å§“å: ${name()}, é‚®ç®±: ${email()}`);
          };
          
          return () => (
            <div style={{ padding: '20px' }}>
              <h3>è¡¨å•ç¤ºä¾‹</h3>
              <form onSubmit={handleSubmit}>
                <div style={{ marginBottom: '10px' }}>
                  <label>
                    å§“å:
                    <input 
                      type="text" 
                      value={name()}
                      onInput={(e) => name(e.target.value)}
                      style={{ marginLeft: '10px', padding: '5px' }}
                    />
                  </label>
                </div>
                
                <div style={{ marginBottom: '10px' }}>
                  <label>
                    é‚®ç®±:
                    <input 
                      type="email" 
                      value={email()}
                      onInput={(e) => email(e.target.value)}
                      style={{ marginLeft: '10px', padding: '5px' }}
                    />
                  </label>
                </div>
                
                <button type="submit">æäº¤</button>
              </form>
              
              <div style={{ marginTop: '20px', padding: '10px', background: '#f0f0f0' }}>
                <p>å§“å: {name()}</p>
                <p>é‚®ç®±: {email()}</p>
              </div>
            </div>
          );
        });
    </script>
</body>
</html>

