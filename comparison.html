<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reactive-Lit vs ä¼ ç»Ÿæ–¹å¼å¯¹æ¯”</title>
    <script src="reactive-lit.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 40px;
            background: #f5f5f5;
        }
        
        .comparison-container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 40px;
        }
        
        .comparison-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .card h2 {
            margin-top: 0;
            padding-bottom: 15px;
            border-bottom: 3px solid #ddd;
        }
        
        .reactive-card h2 {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .traditional-card h2 {
            color: #dc3545;
            border-bottom-color: #dc3545;
        }
        
        .code-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
        }
        
        .demo-area {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            min-height: 100px;
        }
        
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            transition: all 0.2s;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .stats {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
        }
        
        .stats p {
            margin: 5px 0;
            font-size: 14px;
        }
        
        .advantage {
            background: #d4edda;
            color: #155724;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }
        
        .disadvantage {
            background: #f8d7da;
            color: #721c24;
            padding: 10px;
            border-radius: 6px;
            margin-top: 10px;
        }
        
        input {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="comparison-container">
        <h1>âš¡ Reactive-Lit vs ä¼ ç»Ÿ DOM æ“ä½œå¯¹æ¯”</h1>

        <!-- å¯¹æ¯” 1: è®¡æ•°å™¨ -->
        <div class="comparison-row">
            <div class="card reactive-card">
                <h2>ğŸš€ Reactive-Lit (å“åº”å¼)</h2>
                <div class="code-section">
<pre>const [count, setCount] = createState(0);

const template = html\`
  &lt;div&gt;è®¡æ•°: \${count()}&lt;/div&gt;
  &lt;button onClick=\${() => setCount(count() + 1)}&gt;
    å¢åŠ 
  &lt;/button&gt;
\`;

render(template, container);</pre>
                </div>
                <div class="demo-area" id="reactive-counter"></div>
                <div class="advantage">
                    âœ… ä¼˜åŠ¿ï¼šä»£ç ç®€æ´ï¼Œè‡ªåŠ¨æ›´æ–° DOMï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œ
                </div>
                <div class="stats" id="reactive-counter-stats"></div>
            </div>

            <div class="card traditional-card">
                <h2>ğŸŒ ä¼ ç»Ÿæ–¹å¼ (æ‰‹åŠ¨æ“ä½œ)</h2>
                <div class="code-section">
<pre>let count = 0;

function render() {
  container.querySelector('.count').textContent = count;
}

button.addEventListener('click', () => {
  count++;
  render(); // å¿…é¡»æ‰‹åŠ¨è°ƒç”¨
});</pre>
                </div>
                <div class="demo-area" id="traditional-counter"></div>
                <div class="disadvantage">
                    âŒ åŠ£åŠ¿ï¼šéœ€è¦æ‰‹åŠ¨è°ƒç”¨æ¸²æŸ“ï¼Œå®¹æ˜“é—å¿˜ï¼Œä»£ç å•°å—¦
                </div>
                <div class="stats" id="traditional-counter-stats"></div>
            </div>
        </div>

        <!-- å¯¹æ¯” 2: è¡¨å•è¾“å…¥ -->
        <div class="comparison-row">
            <div class="card reactive-card">
                <h2>ğŸš€ Reactive-Lit (åŒå‘ç»‘å®š)</h2>
                <div class="code-section">
<pre>const [text, setText] = createState('');

const template = html\`
  &lt;input .value=\${text()}
         onInput=\${e => setText(e.target.value)}&gt;
  &lt;p&gt;ä½ è¾“å…¥äº†: \${text()}&lt;/p&gt;
  &lt;p&gt;é•¿åº¦: \${text().length}&lt;/p&gt;
\`;

render(template, container);</pre>
                </div>
                <div class="demo-area" id="reactive-input"></div>
                <div class="advantage">
                    âœ… ä¼˜åŠ¿ï¼šå“åº”å¼æ›´æ–°ï¼Œä»£ç æ¸…æ™°ï¼Œæ˜“äºç†è§£
                </div>
            </div>

            <div class="card traditional-card">
                <h2>ğŸŒ ä¼ ç»Ÿæ–¹å¼ (æ‰‹åŠ¨åŒæ­¥)</h2>
                <div class="code-section">
<pre>let text = '';

input.addEventListener('input', (e) => {
  text = e.target.value;
  // æ‰‹åŠ¨æ›´æ–°æ‰€æœ‰ä¾èµ–æ­¤æ•°æ®çš„ DOM
  textDisplay.textContent = 'ä½ è¾“å…¥äº†: ' + text;
  lengthDisplay.textContent = 'é•¿åº¦: ' + text.length;
});</pre>
                </div>
                <div class="demo-area" id="traditional-input"></div>
                <div class="disadvantage">
                    âŒ åŠ£åŠ¿ï¼šæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨æ›´æ–°å¤šä¸ª DOM èŠ‚ç‚¹ï¼Œå®¹æ˜“é—æ¼
                </div>
            </div>
        </div>

        <!-- å¯¹æ¯” 3: åˆ—è¡¨æ¸²æŸ“ -->
        <div class="comparison-row">
            <div class="card reactive-card">
                <h2>ğŸš€ Reactive-Lit (è‡ªåŠ¨åˆ—è¡¨æ›´æ–°)</h2>
                <div class="code-section">
<pre>const state = reactive({ items: ['A', 'B', 'C'] });

const template = html\`
  &lt;ul&gt;
    \${state.items.map(item => 
      html\`&lt;li&gt;\${item}&lt;/li&gt;\`
    ).join('')}
  &lt;/ul&gt;
  &lt;button onClick=\${() => 
    state.items.push('New')
  }&gt;æ·»åŠ &lt;/button&gt;
\`;</pre>
                </div>
                <div class="demo-area" id="reactive-list"></div>
                <div class="advantage">
                    âœ… ä¼˜åŠ¿ï¼šæ•°ç»„æ“ä½œåè‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€å…³å¿ƒ DOM ç»†èŠ‚
                </div>
            </div>

            <div class="card traditional-card">
                <h2>ğŸŒ ä¼ ç»Ÿæ–¹å¼ (æ‰‹åŠ¨åˆ—è¡¨ç®¡ç†)</h2>
                <div class="code-section">
<pre>let items = ['A', 'B', 'C'];

function renderList() {
  ul.innerHTML = ''; // æ¸…ç©º
  items.forEach(item => {
    const li = document.createElement('li');
    li.textContent = item;
    ul.appendChild(li);
  });
}

button.addEventListener('click', () => {
  items.push('New');
  renderList(); // æ‰‹åŠ¨é‡æ–°æ¸²æŸ“
});</pre>
                </div>
                <div class="demo-area" id="traditional-list"></div>
                <div class="disadvantage">
                    âŒ åŠ£åŠ¿ï¼šå®Œå…¨é‡å»º DOMï¼Œæ€§èƒ½å·®ï¼Œä»£ç ç¹ç
                </div>
            </div>
        </div>

        <!-- å¯¹æ¯” 4: å¤æ‚çŠ¶æ€ -->
        <div class="comparison-row">
            <div class="card reactive-card">
                <h2>ğŸš€ Reactive-Lit (è®¡ç®—å±æ€§)</h2>
                <div class="code-section">
<pre>const state = reactive({
  items: [
    { name: 'è‹¹æœ', price: 5, qty: 2 },
    { name: 'é¦™è•‰', price: 3, qty: 3 }
  ]
});

const total = computed(() =>
  state.items.reduce((sum, item) => 
    sum + item.price * item.qty, 0
  )
);

const template = html\`
  &lt;div&gt;æ€»ä»·: \${total()}&lt;/div&gt;
\`;</pre>
                </div>
                <div class="demo-area" id="reactive-computed"></div>
                <div class="advantage">
                    âœ… ä¼˜åŠ¿ï¼šè®¡ç®—å±æ€§è‡ªåŠ¨ç¼“å­˜å’Œæ›´æ–°ï¼Œé«˜æ•ˆä¸”ç®€æ´
                </div>
            </div>

            <div class="card traditional-card">
                <h2>ğŸŒ ä¼ ç»Ÿæ–¹å¼ (æ‰‹åŠ¨è®¡ç®—)</h2>
                <div class="code-section">
<pre>let items = [
  { name: 'è‹¹æœ', price: 5, qty: 2 },
  { name: 'é¦™è•‰', price: 3, qty: 3 }
];

function calculateTotal() {
  return items.reduce((sum, item) => 
    sum + item.price * item.qty, 0
  );
}

function updateDisplay() {
  const total = calculateTotal();
  totalEl.textContent = 'æ€»ä»·: ' + total;
}</pre>
                </div>
                <div class="demo-area" id="traditional-computed"></div>
                <div class="disadvantage">
                    âŒ åŠ£åŠ¿ï¼šæ¯æ¬¡éƒ½è¦æ‰‹åŠ¨è®¡ç®—å’Œæ›´æ–°ï¼Œæ— ç¼“å­˜
                </div>
            </div>
        </div>
    </div>

    <script>
        const { html, render, reactive, computed, createComponent, createState } = window.ReactiveLit;

        // ========== Reactive-Lit ç¤ºä¾‹ ==========

        // 1. å“åº”å¼è®¡æ•°å™¨
        createComponent(() => {
            const [count, setCount] = createState(0);
            const [updates, setUpdates] = createState(0);
            
            const increment = () => {
                setCount(count() + 1);
                setUpdates(updates() + 1);
            };
            
            const template = html`
                <div style="text-align: center;">
                    <h3 style="font-size: 2em; color: #667eea;">${count()}</h3>
                    <button onClick=${increment}>â• å¢åŠ </button>
                    <button onClick=${() => { setCount(0); setUpdates(updates() + 1); }}>ğŸ”„ é‡ç½®</button>
                </div>
            `;
            
            render(template, document.getElementById('reactive-counter'));
            
            document.getElementById('reactive-counter-stats').innerHTML = `
                <p><strong>æ¸²æŸ“æ¬¡æ•°:</strong> ${updates()}</p>
                <p><strong>ä»£ç è¡Œæ•°:</strong> ~10 è¡Œ</p>
                <p><strong>æ€§èƒ½:</strong> âš¡ åªæ›´æ–°å˜åŒ–çš„éƒ¨åˆ†</p>
            `;
        }, document.getElementById('reactive-counter'));

        // 2. å“åº”å¼è¾“å…¥
        createComponent(() => {
            const [text, setText] = createState('');
            
            const template = html`
                <div>
                    <input 
                        type="text" 
                        placeholder="è¾“å…¥ä¸€äº›æ–‡å­—..."
                        .value=${text()}
                        onInput=${(e) => setText(e.target.value)}
                    />
                    <p><strong>ä½ è¾“å…¥äº†:</strong> ${text() || '(ç©º)'}</p>
                    <p><strong>å­—ç¬¦é•¿åº¦:</strong> ${text().length}</p>
                    <p><strong>å•è¯æ•°:</strong> ${text().trim().split(/\s+/).filter(w => w).length}</p>
                </div>
            `;
            
            render(template, document.getElementById('reactive-input'));
        }, document.getElementById('reactive-input'));

        // 3. å“åº”å¼åˆ—è¡¨
        createComponent(() => {
            const state = reactive({
                items: ['é¡¹ç›® A', 'é¡¹ç›® B', 'é¡¹ç›® C']
            });
            
            const addItem = () => {
                state.items.push(`é¡¹ç›® ${String.fromCharCode(65 + state.items.length)}`);
            };
            
            const removeItem = () => {
                if (state.items.length > 0) {
                    state.items.pop();
                }
            };
            
            const template = html`
                <div>
                    <ul style="list-style: none; padding: 0;">
                        ${state.items.map((item, i) => html`
                            <li style="background: #667eea; color: white; padding: 8px; margin: 5px 0; border-radius: 4px;">
                                ${i + 1}. ${item}
                            </li>
                        `).join('')}
                    </ul>
                    <button onClick=${addItem}>â• æ·»åŠ é¡¹ç›®</button>
                    <button onClick=${removeItem}>â– åˆ é™¤æœ€åä¸€é¡¹</button>
                    <p style="margin-top: 10px;"><strong>æ€»è®¡:</strong> ${state.items.length} é¡¹</p>
                </div>
            `;
            
            render(template, document.getElementById('reactive-list'));
        }, document.getElementById('reactive-list'));

        // 4. å“åº”å¼è®¡ç®—å±æ€§
        createComponent(() => {
            const state = reactive({
                items: [
                    { name: 'è‹¹æœ', price: 5, qty: 2 },
                    { name: 'é¦™è•‰', price: 3, qty: 3 }
                ]
            });
            
            const total = computed(() => {
                return state.items.reduce((sum, item) => sum + item.price * item.qty, 0);
            });
            
            const updateQty = (index, delta) => {
                state.items[index].qty = Math.max(0, state.items[index].qty + delta);
            };
            
            const template = html`
                <div>
                    ${state.items.map((item, i) => html`
                        <div style="background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 6px;">
                            <strong>${item.name}</strong> - Â¥${item.price} x ${item.qty}
                            <button onClick=${() => updateQty(i, -1)}>-</button>
                            <button onClick=${() => updateQty(i, 1)}>+</button>
                        </div>
                    `).join('')}
                    <div style="background: #667eea; color: white; padding: 15px; border-radius: 6px; text-align: center;">
                        <h3 style="margin: 0;">æ€»ä»·: Â¥${total()}</h3>
                    </div>
                </div>
            `;
            
            render(template, document.getElementById('reactive-computed'));
        }, document.getElementById('reactive-computed'));

        // ========== ä¼ ç»Ÿæ–¹å¼ç¤ºä¾‹ ==========

        // 1. ä¼ ç»Ÿè®¡æ•°å™¨
        {
            const container = document.getElementById('traditional-counter');
            let count = 0;
            let updates = 0;
            
            function renderCounter() {
                updates++;
                container.innerHTML = `
                    <div style="text-align: center;">
                        <h3 style="font-size: 2em; color: #dc3545;">${count}</h3>
                        <button id="trad-inc">â• å¢åŠ </button>
                        <button id="trad-reset">ğŸ”„ é‡ç½®</button>
                    </div>
                `;
                
                document.getElementById('trad-inc').addEventListener('click', () => {
                    count++;
                    renderCounter();
                    updateStats();
                });
                
                document.getElementById('trad-reset').addEventListener('click', () => {
                    count = 0;
                    renderCounter();
                    updateStats();
                });
            }
            
            function updateStats() {
                document.getElementById('traditional-counter-stats').innerHTML = `
                    <p><strong>æ¸²æŸ“æ¬¡æ•°:</strong> ${updates}</p>
                    <p><strong>ä»£ç è¡Œæ•°:</strong> ~20 è¡Œ</p>
                    <p><strong>æ€§èƒ½:</strong> ğŸŒ å®Œå…¨é‡å»º DOM</p>
                `;
            }
            
            renderCounter();
            updateStats();
        }

        // 2. ä¼ ç»Ÿè¾“å…¥
        {
            const container = document.getElementById('traditional-input');
            let text = '';
            
            container.innerHTML = `
                <div>
                    <input type="text" id="trad-input" placeholder="è¾“å…¥ä¸€äº›æ–‡å­—..." />
                    <p id="trad-text"><strong>ä½ è¾“å…¥äº†:</strong> (ç©º)</p>
                    <p id="trad-length"><strong>å­—ç¬¦é•¿åº¦:</strong> 0</p>
                    <p id="trad-words"><strong>å•è¯æ•°:</strong> 0</p>
                </div>
            `;
            
            document.getElementById('trad-input').addEventListener('input', (e) => {
                text = e.target.value;
                // å¿…é¡»æ‰‹åŠ¨æ›´æ–°æ¯ä¸ª DOM å…ƒç´ 
                document.getElementById('trad-text').innerHTML = 
                    `<strong>ä½ è¾“å…¥äº†:</strong> ${text || '(ç©º)'}`;
                document.getElementById('trad-length').innerHTML = 
                    `<strong>å­—ç¬¦é•¿åº¦:</strong> ${text.length}`;
                document.getElementById('trad-words').innerHTML = 
                    `<strong>å•è¯æ•°:</strong> ${text.trim().split(/\s+/).filter(w => w).length}`;
            });
        }

        // 3. ä¼ ç»Ÿåˆ—è¡¨
        {
            const container = document.getElementById('traditional-list');
            let items = ['é¡¹ç›® A', 'é¡¹ç›® B', 'é¡¹ç›® C'];
            
            function renderList() {
                const ul = document.createElement('ul');
                ul.style.cssText = 'list-style: none; padding: 0;';
                
                items.forEach((item, i) => {
                    const li = document.createElement('li');
                    li.style.cssText = 'background: #dc3545; color: white; padding: 8px; margin: 5px 0; border-radius: 4px;';
                    li.textContent = `${i + 1}. ${item}`;
                    ul.appendChild(li);
                });
                
                container.innerHTML = '';
                container.appendChild(ul);
                
                const addBtn = document.createElement('button');
                addBtn.textContent = 'â• æ·»åŠ é¡¹ç›®';
                addBtn.onclick = () => {
                    items.push(`é¡¹ç›® ${String.fromCharCode(65 + items.length)}`);
                    renderList();
                };
                
                const removeBtn = document.createElement('button');
                removeBtn.textContent = 'â– åˆ é™¤æœ€åä¸€é¡¹';
                removeBtn.onclick = () => {
                    if (items.length > 0) {
                        items.pop();
                        renderList();
                    }
                };
                
                const p = document.createElement('p');
                p.style.marginTop = '10px';
                p.innerHTML = `<strong>æ€»è®¡:</strong> ${items.length} é¡¹`;
                
                container.appendChild(addBtn);
                container.appendChild(removeBtn);
                container.appendChild(p);
            }
            
            renderList();
        }

        // 4. ä¼ ç»Ÿè®¡ç®—å±æ€§
        {
            const container = document.getElementById('traditional-computed');
            let items = [
                { name: 'è‹¹æœ', price: 5, qty: 2 },
                { name: 'é¦™è•‰', price: 3, qty: 3 }
            ];
            
            function calculateTotal() {
                return items.reduce((sum, item) => sum + item.price * item.qty, 0);
            }
            
            function renderComputed() {
                container.innerHTML = '';
                
                items.forEach((item, i) => {
                    const div = document.createElement('div');
                    div.style.cssText = 'background: #f8f9fa; padding: 10px; margin: 10px 0; border-radius: 6px;';
                    
                    const text = document.createElement('span');
                    text.innerHTML = `<strong>${item.name}</strong> - Â¥${item.price} x ${item.qty} `;
                    
                    const minusBtn = document.createElement('button');
                    minusBtn.textContent = '-';
                    minusBtn.onclick = () => {
                        items[i].qty = Math.max(0, items[i].qty - 1);
                        renderComputed();
                    };
                    
                    const plusBtn = document.createElement('button');
                    plusBtn.textContent = '+';
                    plusBtn.onclick = () => {
                        items[i].qty++;
                        renderComputed();
                    };
                    
                    div.appendChild(text);
                    div.appendChild(minusBtn);
                    div.appendChild(plusBtn);
                    container.appendChild(div);
                });
                
                const totalDiv = document.createElement('div');
                totalDiv.style.cssText = 'background: #dc3545; color: white; padding: 15px; border-radius: 6px; text-align: center;';
                totalDiv.innerHTML = `<h3 style="margin: 0;">æ€»ä»·: Â¥${calculateTotal()}</h3>`;
                container.appendChild(totalDiv);
            }
            
            renderComputed();
        }
    </script>
</body>
</html>

